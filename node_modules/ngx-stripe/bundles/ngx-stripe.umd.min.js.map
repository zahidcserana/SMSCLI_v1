{"version":3,"sources":["ngx-stripe.umd.js"],"names":["global","factory","exports","module","require","define","amd","ng","stripe","core","common","Rx","this","BehaviorSubject","Observable","isSourceData","sourceData","isBankAccount","account","isBankAccountData","bankAccountData","account_holder_type","isPii","pii","isPiiData","piiData","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","WindowRef","platformId","getNativeWindow","isPlatformBrowser","window","decorators","type","Injectable","ctorParameters","undefined","Inject","args","PLATFORM_ID","DocumentRef","getNativeDocument","document","LazyStripeAPILoader","status","error","loaded","loading","asStream","load","asObservable","isReady","getValue","_this","isPlatformServer","next","script","createElement","async","defer","src","onload","onerror","body","appendChild","STRIPE_PUBLISHABLE_KEY","InjectionToken","STRIPE_OPTIONS","StripeInstance","loader","key","options","stripe$","filter","first","map","Stripe","subscribe","getInstance","elements","Boolean","createToken","a","b","switchMap","fromPromise","createSource","retrieveSource","source","paymentRequest","StripeService","getStripeReference","setKey","changeKey","StripeFactoryService","baseKey","baseOptions","create","StripeCardComponent","stripeService","card","EventEmitter","on","options$","elementsOptions$","defineProperty","set","optionsIn","enumerable","configurable","stripeIn","ngOnInit","elements$","combineLatest","_a","keys","element","ev","emit","event","mount","stripeCard","nativeElement","getCard","Component","selector","template","propDecorators","Output","ViewChild","Input","elementsOptions","NgxStripeModule","forRoot","publishableKey","ngModule","providers","provide","useValue","forChild","NgModule","declarations","value"],"mappings":"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","file":"ngx-stripe.umd.min.js.map","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('@angular/common'), require('rxjs/BehaviorSubject'), require('rxjs/Observable'), require('rxjs/add/observable/combineLatest'), require('rxjs/add/observable/fromPromise'), require('rxjs/add/observable/of'), require('rxjs/add/operator/switchMap'), require('rxjs/add/operator/filter'), require('rxjs/add/operator/first'), require('rxjs/add/operator/map')) :\n\ttypeof define === 'function' && define.amd ? define('ngx-stripe', ['exports', '@angular/core', '@angular/common', 'rxjs/BehaviorSubject', 'rxjs/Observable', 'rxjs/add/observable/combineLatest', 'rxjs/add/observable/fromPromise', 'rxjs/add/observable/of', 'rxjs/add/operator/switchMap', 'rxjs/add/operator/filter', 'rxjs/add/operator/first', 'rxjs/add/operator/map'], factory) :\n\t(factory((global.ng = global.ng || {}, global.ng.stripe = {}),global.ng.core,global.ng.common,global.Rx,global.Rx));\n}(this, (function (exports,core,common,BehaviorSubject,Observable) { 'use strict';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\n\r\n\r\nvar __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n};\n\n/**\n * @license ngx-stripe\n * MIT license\n */\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nvar WindowRef = (function () {\n    function WindowRef(platformId) {\n        this.platformId = platformId;\n    }\n    /**\n     * @return {?}\n     */\n    WindowRef.prototype.getNativeWindow = /**\n     * @return {?}\n     */\n    function () {\n        if (common.isPlatformBrowser(this.platformId)) {\n            return window;\n        }\n        return /** @type {?} */ ({});\n    };\n    WindowRef.decorators = [\n        { type: core.Injectable },\n    ];\n    /** @nocollapse */\n    WindowRef.ctorParameters = function () { return [\n        { type: undefined, decorators: [{ type: core.Inject, args: [core.PLATFORM_ID,] },] },\n    ]; };\n    return WindowRef;\n}());\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nvar DocumentRef = (function () {\n    function DocumentRef(platformId) {\n        this.platformId = platformId;\n    }\n    /**\n     * @return {?}\n     */\n    DocumentRef.prototype.getNativeDocument = /**\n     * @return {?}\n     */\n    function () {\n        if (common.isPlatformBrowser(this.platformId)) {\n            return document;\n        }\n        return /** @type {?} */ ({});\n    };\n    DocumentRef.decorators = [\n        { type: core.Injectable },\n    ];\n    /** @nocollapse */\n    DocumentRef.ctorParameters = function () { return [\n        { type: undefined, decorators: [{ type: core.Inject, args: [core.PLATFORM_ID,] },] },\n    ]; };\n    return DocumentRef;\n}());\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n/**\n * @record\n */\n\nvar LazyStripeAPILoader = (function () {\n    function LazyStripeAPILoader(platformId, window, document) {\n        this.platformId = platformId;\n        this.window = window;\n        this.document = document;\n        this.status = new BehaviorSubject.BehaviorSubject({\n            error: false,\n            loaded: false,\n            loading: false\n        });\n    }\n    /**\n     * @return {?}\n     */\n    LazyStripeAPILoader.prototype.asStream = /**\n     * @return {?}\n     */\n    function () {\n        this.load();\n        return this.status.asObservable();\n    };\n    /**\n     * @return {?}\n     */\n    LazyStripeAPILoader.prototype.isReady = /**\n     * @return {?}\n     */\n    function () {\n        return this.status.getValue().loaded;\n    };\n    /**\n     * @return {?}\n     */\n    LazyStripeAPILoader.prototype.load = /**\n     * @return {?}\n     */\n    function () {\n        var _this = this;\n        if (common.isPlatformServer(this.platformId)) {\n            return;\n        }\n        var /** @type {?} */ status = this.status.getValue();\n        if (this.window.getNativeWindow().hasOwnProperty('Stripe')) {\n            this.status.next({\n                error: false,\n                loaded: true,\n                loading: false\n            });\n        }\n        else if (!status.loaded && !status.loading) {\n            this.status.next(__assign({}, status, { loading: true }));\n            var /** @type {?} */ script = this.document.getNativeDocument().createElement('script');\n            script.type = 'text/javascript';\n            script.async = true;\n            script.defer = true;\n            script.src = 'https://js.stripe.com/v3/';\n            script.onload = function () {\n                _this.status.next({\n                    error: false,\n                    loaded: true,\n                    loading: false\n                });\n            };\n            script.onerror = function () {\n                _this.status.next({\n                    error: true,\n                    loaded: false,\n                    loading: false\n                });\n            };\n            this.document.getNativeDocument().body.appendChild(script);\n        }\n    };\n    LazyStripeAPILoader.decorators = [\n        { type: core.Injectable },\n    ];\n    /** @nocollapse */\n    LazyStripeAPILoader.ctorParameters = function () { return [\n        { type: undefined, decorators: [{ type: core.Inject, args: [core.PLATFORM_ID,] },] },\n        { type: WindowRef, },\n        { type: DocumentRef, },\n    ]; };\n    return LazyStripeAPILoader;\n}());\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nvar STRIPE_PUBLISHABLE_KEY = new core.InjectionToken('Stripe Publishable Key');\nvar STRIPE_OPTIONS = new core.InjectionToken('Stripe Options');\n/**\n * @record\n */\n\n/**\n * @record\n */\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n/**\n * @record\n */\n\n/**\n * @record\n */\n\n/**\n * @record\n */\n\n/**\n * @param {?} sourceData\n * @return {?}\n */\nfunction isSourceData(sourceData) {\n    return 'type' in sourceData;\n}\n/**\n * @record\n */\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n/**\n * @record\n */\n\n/**\n * @record\n */\n\n/**\n * @record\n */\n\n/**\n * @record\n */\n\n/**\n * @record\n */\n\n/**\n * @param {?} account\n * @return {?}\n */\nfunction isBankAccount(account) {\n    return account === 'bank_account';\n}\n/**\n * @param {?} bankAccountData\n * @return {?}\n */\nfunction isBankAccountData(bankAccountData) {\n    return ('country' in bankAccountData &&\n        'currency' in bankAccountData &&\n        'routing_number' in bankAccountData &&\n        'account_number' in bankAccountData &&\n        'account_holder_name' in bankAccountData &&\n        'account_holder_type' in bankAccountData &&\n        (bankAccountData.account_holder_type === 'individual' ||\n            bankAccountData.account_holder_type === 'company'));\n}\n/**\n * @param {?} pii\n * @return {?}\n */\nfunction isPii(pii) {\n    return pii === 'pii';\n}\n/**\n * @param {?} piiData\n * @return {?}\n */\nfunction isPiiData(piiData) {\n    return 'personal_id_number' in piiData;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nvar StripeInstance = (function () {\n    function StripeInstance(loader, window, key, options) {\n        var _this = this;\n        this.loader = loader;\n        this.window = window;\n        this.key = key;\n        this.options = options;\n        this.stripe$ = new BehaviorSubject.BehaviorSubject(undefined);\n        this.loader\n            .asStream()\n            .filter(function (status) { return status.loaded === true; })\n            .first()\n            .map(function () { return (/** @type {?} */ (_this.window.getNativeWindow())).Stripe; })\n            .subscribe(function (Stripe) {\n            var /** @type {?} */ stripe = _this.options\n                ? (/** @type {?} */ (Stripe(_this.key, _this.options)))\n                : (/** @type {?} */ (Stripe(_this.key)));\n            _this.stripe$.next(stripe);\n        });\n    }\n    /**\n     * @return {?}\n     */\n    StripeInstance.prototype.getInstance = /**\n     * @return {?}\n     */\n    function () {\n        return this.stripe$.getValue();\n    };\n    /**\n     * @param {?=} options\n     * @return {?}\n     */\n    StripeInstance.prototype.elements = /**\n     * @param {?=} options\n     * @return {?}\n     */\n    function (options) {\n        return this.stripe$\n            .asObservable()\n            .filter(function (stripe) { return Boolean(stripe); })\n            .map(function (stripe) { return (/** @type {?} */ (stripe)).elements(options); })\n            .first();\n    };\n    /**\n     * @param {?} a\n     * @param {?} b\n     * @return {?}\n     */\n    StripeInstance.prototype.createToken = /**\n     * @param {?} a\n     * @param {?} b\n     * @return {?}\n     */\n    function (a, b) {\n        return this.stripe$\n            .asObservable()\n            .filter(function (stripe) { return Boolean(stripe); })\n            .switchMap(function (s) {\n            var /** @type {?} */ stripe = /** @type {?} */ (s);\n            if (isBankAccount(a) && isBankAccountData(b)) {\n                return Observable.Observable.fromPromise(stripe.createToken(a, b));\n            }\n            else if (isPii(a) && isPiiData(b)) {\n                return Observable.Observable.fromPromise(stripe.createToken(a, b));\n            }\n            else {\n                return Observable.Observable.fromPromise(stripe.createToken(/** @type {?} */ (a), /** @type {?} */ (b)));\n            }\n        })\n            .first();\n    };\n    /**\n     * @param {?} a\n     * @param {?=} b\n     * @return {?}\n     */\n    StripeInstance.prototype.createSource = /**\n     * @param {?} a\n     * @param {?=} b\n     * @return {?}\n     */\n    function (a, b) {\n        return this.stripe$\n            .asObservable()\n            .filter(function (stripe) { return Boolean(stripe); })\n            .switchMap(function (s) {\n            var /** @type {?} */ stripe = /** @type {?} */ (s);\n            if (isSourceData(a)) {\n                return Observable.Observable.fromPromise(stripe.createSource(/** @type {?} */ (a)));\n            }\n            return Observable.Observable.fromPromise(stripe.createSource(/** @type {?} */ (a), b));\n        })\n            .first();\n    };\n    /**\n     * @param {?} source\n     * @return {?}\n     */\n    StripeInstance.prototype.retrieveSource = /**\n     * @param {?} source\n     * @return {?}\n     */\n    function (source) {\n        return this.stripe$\n            .asObservable()\n            .filter(function (stripe) { return Boolean(stripe); })\n            .switchMap(function (s) {\n            var /** @type {?} */ stripe = /** @type {?} */ (s);\n            return Observable.Observable.fromPromise(stripe.retrieveSource(source));\n        })\n            .first();\n    };\n    /**\n     * @param {?} options\n     * @return {?}\n     */\n    StripeInstance.prototype.paymentRequest = /**\n     * @param {?} options\n     * @return {?}\n     */\n    function (options) {\n        var /** @type {?} */ stripe = this.getInstance();\n        if (stripe) {\n            return stripe.paymentRequest(options);\n        }\n        return undefined;\n    };\n    return StripeInstance;\n}());\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nvar StripeService = (function () {\n    function StripeService(key, options, loader, window) {\n        this.key = key;\n        this.options = options;\n        this.loader = loader;\n        this.window = window;\n        if (key) {\n            this.stripe = new StripeInstance(this.loader, this.window, key, options);\n        }\n    }\n    /**\n     * @return {?}\n     */\n    StripeService.prototype.getStripeReference = /**\n     * @return {?}\n     */\n    function () {\n        var _this = this;\n        return this.loader\n            .asStream()\n            .filter(function (status) { return status.loaded === true; })\n            .map(function () { return (/** @type {?} */ (_this.window.getNativeWindow())).Stripe; });\n    };\n    /**\n     * @return {?}\n     */\n    StripeService.prototype.getInstance = /**\n     * @return {?}\n     */\n    function () {\n        return this.stripe.getInstance();\n    };\n    /**\n     * @param {?} key\n     * @param {?=} options\n     * @return {?}\n     */\n    StripeService.prototype.setKey = /**\n     * @param {?} key\n     * @param {?=} options\n     * @return {?}\n     */\n    function (key, options) {\n        return this.changeKey(key, options);\n    };\n    /**\n     * @param {?} key\n     * @param {?=} options\n     * @return {?}\n     */\n    StripeService.prototype.changeKey = /**\n     * @param {?} key\n     * @param {?=} options\n     * @return {?}\n     */\n    function (key, options) {\n        this.stripe = new StripeInstance(this.loader, this.window, key, options);\n        return this.stripe;\n    };\n    /**\n     * @param {?=} options\n     * @return {?}\n     */\n    StripeService.prototype.elements = /**\n     * @param {?=} options\n     * @return {?}\n     */\n    function (options) {\n        return this.stripe.elements(options);\n    };\n    /**\n     * @param {?} a\n     * @param {?} b\n     * @return {?}\n     */\n    StripeService.prototype.createToken = /**\n     * @param {?} a\n     * @param {?} b\n     * @return {?}\n     */\n    function (a, b) {\n        return this.stripe.createToken(a, b);\n    };\n    /**\n     * @param {?} a\n     * @param {?=} b\n     * @return {?}\n     */\n    StripeService.prototype.createSource = /**\n     * @param {?} a\n     * @param {?=} b\n     * @return {?}\n     */\n    function (a, b) {\n        return this.stripe.createSource(a, b);\n    };\n    /**\n     * @param {?} source\n     * @return {?}\n     */\n    StripeService.prototype.retrieveSource = /**\n     * @param {?} source\n     * @return {?}\n     */\n    function (source) {\n        return this.stripe.retrieveSource(source);\n    };\n    /**\n     * @param {?} options\n     * @return {?}\n     */\n    StripeService.prototype.paymentRequest = /**\n     * @param {?} options\n     * @return {?}\n     */\n    function (options) {\n        return this.stripe.paymentRequest(options);\n    };\n    StripeService.decorators = [\n        { type: core.Injectable },\n    ];\n    /** @nocollapse */\n    StripeService.ctorParameters = function () { return [\n        { type: undefined, decorators: [{ type: core.Inject, args: [STRIPE_PUBLISHABLE_KEY,] },] },\n        { type: undefined, decorators: [{ type: core.Inject, args: [STRIPE_OPTIONS,] },] },\n        { type: LazyStripeAPILoader, },\n        { type: WindowRef, },\n    ]; };\n    return StripeService;\n}());\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nvar StripeFactoryService = (function () {\n    function StripeFactoryService(baseKey, baseOptions, loader, window) {\n        this.baseKey = baseKey;\n        this.baseOptions = baseOptions;\n        this.loader = loader;\n        this.window = window;\n    }\n    /**\n     * @param {?} key\n     * @param {?=} options\n     * @return {?}\n     */\n    StripeFactoryService.prototype.create = /**\n     * @param {?} key\n     * @param {?=} options\n     * @return {?}\n     */\n    function (key, options) {\n        return new StripeInstance(this.loader, this.window, key, options);\n    };\n    StripeFactoryService.decorators = [\n        { type: core.Injectable },\n    ];\n    /** @nocollapse */\n    StripeFactoryService.ctorParameters = function () { return [\n        { type: undefined, decorators: [{ type: core.Inject, args: [STRIPE_PUBLISHABLE_KEY,] },] },\n        { type: undefined, decorators: [{ type: core.Inject, args: [STRIPE_OPTIONS,] },] },\n        { type: LazyStripeAPILoader, },\n        { type: WindowRef, },\n    ]; };\n    return StripeFactoryService;\n}());\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nvar StripeCardComponent = (function () {\n    function StripeCardComponent(stripeService) {\n        this.stripeService = stripeService;\n        this.card = new core.EventEmitter();\n        this.on = new core.EventEmitter();\n        this.options$ = new BehaviorSubject.BehaviorSubject({});\n        this.elementsOptions$ = new BehaviorSubject.BehaviorSubject({});\n        this.stripe$ = new BehaviorSubject.BehaviorSubject(null);\n    }\n    Object.defineProperty(StripeCardComponent.prototype, \"options\", {\n        set: /**\n         * @param {?} optionsIn\n         * @return {?}\n         */\n        function (optionsIn) {\n            this.options$.next(optionsIn);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(StripeCardComponent.prototype, \"elementsOptions\", {\n        set: /**\n         * @param {?} optionsIn\n         * @return {?}\n         */\n        function (optionsIn) {\n            this.elementsOptions$.next(optionsIn);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(StripeCardComponent.prototype, \"stripe\", {\n        set: /**\n         * @param {?} stripeIn\n         * @return {?}\n         */\n        function (stripeIn) {\n            this.stripe$.next(stripeIn);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @return {?}\n     */\n    StripeCardComponent.prototype.ngOnInit = /**\n     * @return {?}\n     */\n    function () {\n        var _this = this;\n        var /** @type {?} */ elements$ = Observable.Observable.combineLatest(this.elementsOptions$.asObservable(), this.stripe$.asObservable()).switchMap(function (_a) {\n            var options = _a[0], stripe = _a[1];\n            if (stripe) {\n                if (Object.keys(options).length > 0) {\n                    return stripe.elements(options);\n                }\n                return stripe.elements();\n            }\n            else {\n                if (Object.keys(options).length > 0) {\n                    return _this.stripeService.elements(options);\n                }\n                return _this.stripeService.elements();\n            }\n        });\n        Observable.Observable.combineLatest(elements$, this.options$.asObservable().filter(function (options) { return Boolean(options); })).subscribe(function (_a) {\n            var elements = _a[0], options = _a[1];\n            _this.element = elements.create('card', options);\n            _this.element.on('blur', function (ev) {\n                return _this.on.emit({\n                    event: ev,\n                    type: 'blur'\n                });\n            });\n            _this.element.on('change', function (ev) {\n                return _this.on.emit({\n                    event: ev,\n                    type: 'change'\n                });\n            });\n            _this.element.on('click', function (ev) {\n                return _this.on.emit({\n                    event: ev,\n                    type: 'click'\n                });\n            });\n            _this.element.on('focus', function (ev) {\n                return _this.on.emit({\n                    event: ev,\n                    type: 'focus'\n                });\n            });\n            _this.element.on('ready', function (ev) {\n                return _this.on.emit({\n                    event: ev,\n                    type: 'ready'\n                });\n            });\n            _this.element.mount(_this.stripeCard.nativeElement);\n            _this.card.emit(_this.element);\n        });\n    };\n    /**\n     * @return {?}\n     */\n    StripeCardComponent.prototype.getCard = /**\n     * @return {?}\n     */\n    function () {\n        return this.element;\n    };\n    StripeCardComponent.decorators = [\n        { type: core.Component, args: [{\n                    selector: 'ngx-stripe-card',\n                    template: \"<div class=\\\"field\\\" #stripeCard></div>\"\n                },] },\n    ];\n    /** @nocollapse */\n    StripeCardComponent.ctorParameters = function () { return [\n        { type: StripeService, },\n    ]; };\n    StripeCardComponent.propDecorators = {\n        \"card\": [{ type: core.Output },],\n        \"on\": [{ type: core.Output },],\n        \"stripeCard\": [{ type: core.ViewChild, args: ['stripeCard',] },],\n        \"options\": [{ type: core.Input },],\n        \"elementsOptions\": [{ type: core.Input },],\n        \"stripe\": [{ type: core.Input },],\n    };\n    return StripeCardComponent;\n}());\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nvar NgxStripeModule = (function () {\n    function NgxStripeModule() {\n    }\n    /**\n     * @param {?=} publishableKey\n     * @param {?=} options\n     * @return {?}\n     */\n    NgxStripeModule.forRoot = /**\n     * @param {?=} publishableKey\n     * @param {?=} options\n     * @return {?}\n     */\n    function (publishableKey, options) {\n        return {\n            ngModule: NgxStripeModule,\n            providers: [\n                LazyStripeAPILoader,\n                StripeService,\n                StripeFactoryService,\n                WindowRef,\n                DocumentRef,\n                {\n                    provide: STRIPE_PUBLISHABLE_KEY,\n                    useValue: publishableKey\n                },\n                {\n                    provide: STRIPE_OPTIONS,\n                    useValue: options\n                }\n            ]\n        };\n    };\n    /**\n     * @param {?=} publishableKey\n     * @param {?=} options\n     * @return {?}\n     */\n    NgxStripeModule.forChild = /**\n     * @param {?=} publishableKey\n     * @param {?=} options\n     * @return {?}\n     */\n    function (publishableKey, options) {\n        return {\n            ngModule: NgxStripeModule,\n            providers: [\n                LazyStripeAPILoader,\n                StripeService,\n                StripeFactoryService,\n                WindowRef,\n                DocumentRef,\n                {\n                    provide: STRIPE_PUBLISHABLE_KEY,\n                    useValue: publishableKey\n                },\n                {\n                    provide: STRIPE_OPTIONS,\n                    useValue: options\n                }\n            ]\n        };\n    };\n    NgxStripeModule.decorators = [\n        { type: core.NgModule, args: [{\n                    declarations: [StripeCardComponent],\n                    exports: [StripeCardComponent]\n                },] },\n    ];\n    /** @nocollapse */\n    NgxStripeModule.ctorParameters = function () { return []; };\n    return NgxStripeModule;\n}());\n\nexports.NgxStripeModule = NgxStripeModule;\nexports.StripeCardComponent = StripeCardComponent;\nexports.StripeService = StripeService;\nexports.StripeFactoryService = StripeFactoryService;\nexports.StripeInstance = StripeInstance;\nexports.LazyStripeAPILoader = LazyStripeAPILoader;\nexports.WindowRef = WindowRef;\nexports.DocumentRef = DocumentRef;\nexports.isSourceData = isSourceData;\nexports.STRIPE_PUBLISHABLE_KEY = STRIPE_PUBLISHABLE_KEY;\nexports.STRIPE_OPTIONS = STRIPE_OPTIONS;\nexports.isBankAccount = isBankAccount;\nexports.isBankAccountData = isBankAccountData;\nexports.isPii = isPii;\nexports.isPiiData = isPiiData;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=ngx-stripe.umd.js.map\n"]}